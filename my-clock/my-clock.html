<link rel="import" href="../polymer/polymer.html">
<dom-module id="my-clock">
	<template>
		<style>
			:host {
				display: block;
			}
			.container {
				background: black;
				color: white;
				padding: 15px;
				text-align: center;
			}
			iron-icon {
				height: 40px;
				width: 40px;
			}
			.time {
				margin-top: 10px;
				font-size: 24px;		
			}
		</style>
		<div class="container">
			<iron-icon icon="device:access-time"></iron-icon>
			<div class="time">{{hours}} : {{minutes}} : {{seconds}}</div>
		</div>
	</template>
	<script>
		Polymer({
			is: 'my-clock',
			properties: {
				hours: {
					type: String
				},
				minutes: {
					type: String
				},
				seconds: {
					type: String
				}
			},
			ready: function() {
				var clock = this;
				clock.setTime();
				clock.update();
				setInterval(function() { // Interval to keep going the clock
					clock.update();
				}, 1000);  
			},
			setTime: function() {
				var time = new Date();
				this.hours = this.addZero(time.getHours());
				this.minutes = this.addZero(time.getMinutes());
				this.seconds = this.addZero(time.getSeconds());
			},
			update: function() {
				this.seconds = this.updateTimeUnit(this.seconds, 60);
				if(this.seconds === '00') {
					this.minutes = this.updateTimeUnit(this.minutes, 60);
					if(this.minutes === '00') {
						this.hours = this.updateTimeUnit(this.hours, 24);
					}
				}
			},
			addZero: function(timeUnit) {
				var result;
				if(timeUnit < 10) {
					result = '0' + String(timeUnit);
				} else {
					result = String(timeUnit);
				}
				return result;
			},
			updateTimeUnit: function(timeUnit, limit) {
				timeUnit = parseInt(timeUnit) + 1; // Increment
				timeUnit = this.addZero(timeUnit); // format
				if(timeUnit === limit) {
					timeUnit = '00';
				}
				return timeUnit;
			}
		});
	</script>
</dom-module>